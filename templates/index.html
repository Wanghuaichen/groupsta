{% extends "layout.html" %}

{% block title %}
    Index
{% endblock %}

{% block main %}
    <body>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js"></script>
        <script>
	        function liveSearch(value){
					value = value.trim();
					if(value != ""){
						$.ajax({
							url: "{{ url_for('search') }}",
							data: {searchText: value},
							dataType: "json",
							success: function(data){
								// print group_name
								var res = "";
								for(i in data.results){
									res += "<div>"+data.results[i]+"</div>";
								}
								$("#results").html(res);

								// print group_i
								var id = ""
								for(i in data.group_id){
									id += data.group_id[i];
								}
								$("#id").html(id);

								// print group_bio
								var bio = "";
								for(i in data.bio){
									bio += "<div>"+data.bio[i]+"</div>";
								}
								$("#bio").html(bio);
							}
						});
					}
					else{
						$("#results").html("");
						$("#button").html("");
						$("#bio").html("");
					}
				}
        </script>

		<form action="{{ url_for('index') }}" method="post">
	        <input type=text onkeyup="liveSearch(this.value)">
			<div id="results"></div>
			<button id="id" value="id"></button>
			<div id="bio"></div>
		</form>
{% endblock %}